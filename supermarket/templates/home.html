{% extends "base.html" %}
{% load static %}

{% block title %}InÃ­cio{% endblock %}

{% block content %}
<div class="container my-5">

    {% if categories %}

        <!-- Header da home -->
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h4 class="fw-bold mb-0">Produtos em destaque</h4>

            <a 
                href="{% url 'market:all' %}" 
                class="btn btn-outline-primary btn-sm"
            >
                Ver todos
                <i class="bi bi-arrow-right ms-1"></i>
            </a>
        </div>

        <!-- Categorias -->
        {% for category in categories %}
            {% if category.products.all %}
                <section class="mb-5">
                    <h5 class="mb-3 fw-semibold">
                        {{ category.name }}
                    </h5>

                    {% include "scroll-product.html" with items=category.products.all %}
                </section>
            {% endif %}
        {% endfor %}

    {% else %}

        <!-- Estado vazio -->
        <div class="text-center py-5">
            <i class="bi bi-box-seam fs-1 text-muted"></i>
            <h4 class="mt-3">Sem produtos no momento</h4>
            <p class="text-muted">
                Volte mais tarde, em breve teremos novidades ðŸ˜‰
            </p>
        </div>

    {% endif %}
<script>
        document.querySelectorAll('.scroll-row').forEach(row => {
        row.addEventListener('wheel', (event) => {
            event.preventDefault();
            row.scrollBy({
                left: event.deltaY < 0 ? -120 : 120,
                behavior: 'smooth'
            });
        });
    });
</script>
</div>
{% endblock %}
