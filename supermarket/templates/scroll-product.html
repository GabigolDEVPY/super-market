<div class="mb-4">

    <!-- Linha de produtos com scroll -->
    <div 
        class="d-flex gap-3 overflow-auto pb-3 scroll-row"
        style="scrollbar-width: thin;"
    >

        {% for product in items %}
            <a 
                href="{% url 'product:product' product.id %}" 
                class="text-decoration-none text-dark"
            >
                <div class="card border-0 shadow-sm rounded-3 h-100" style="min-width: 220px;">

                    <!-- Imagem -->
                    <div class="d-flex align-items-center justify-content-center p-3">
                        <img 
                            src="{{ product.image.url }}" 
                            class="img-fluid"
                            alt="{{ product.name }}"
                            style="height: 160px; object-fit: contain;"
                        >
                    </div>

                    <!-- Corpo -->
                    <div class="card-body d-flex flex-column">

                        <h6 class="card-title mb-2">
                            {{ product.name }}
                        </h6>

                        {% if product.has_stock %}
                            <div class="mt-auto">

                                {% if product.discount %}
                                    <small class="text-muted text-decoration-line-through">
                                        R$ {{ product.price }}
                                    </small>
                                {% endif %}

                                <h6 class="fw-bold mb-1">
                                    R$ {{ product.apply_discount }}
                                </h6>

                                {% if product.discount %}
                                    <span class="badge bg-success mb-1">
                                        {{ product.discount.discount }}% OFF
                                    </span>
                                {% endif %}

                                <p class="text-success small mb-0">
                                    em até 12x sem juros
                                </p>

                            </div>
                        {% else %}
                            <span class="badge bg-danger mt-auto">
                                Indisponível
                            </span>
                        {% endif %}

                    </div>
                </div>
            </a>
        {% endfor %}

    </div>
</div>

<!-- Scroll horizontal com mouse -->
<script>
document.querySelectorAll('.scroll-row').forEach(row => {
    row.addEventListener('wheel', (event) => {
        event.preventDefault();
        row.scrollBy({
            left: event.deltaY < 0 ? -120 : 120,
            behavior: 'smooth'
        });
    });
});
</script>
